# Comprehensive Estimate Completeness Audit - Dependency Rules

## Overview

This document defines all construction dependencies and required companion items that should be checked in construction estimates, based on industry best practices, Xactimate patterns, and common missing items in insurance restoration and general construction.

---

## Construction Dependency Rules by Category

### 1. DRYWALL & INTERIOR FINISHES

#### 1.1 Drywall Replacement → Tape & Mud (CRITICAL)
**Trigger:** Contains drywall/sheetrock + replace/replacement/remove/demo/install/hang  
**Required:** tape, mud, compound, joint  
**Missing Item:** "Drywall tape and mud (finish)"  
**Reason:** "Drywall replacement typically requires taping and joint compound."  
**Priority:** CRITICAL

#### 1.2 Drywall Replacement → Texture (CRITICAL)
**Trigger:** Drywall replacement detected  
**Required:** texture, orange peel, knockdown  
**Missing Item:** "Drywall texture (match existing)"  
**Reason:** "Drywall replacement usually requires re-texturing to match existing finish."  
**Priority:** CRITICAL

#### 1.3 Drywall Replacement → Prime/Seal (MINOR)
**Trigger:** Drywall replacement detected  
**Required:** prime, primer, seal  
**Missing Item:** "Prime/seal new drywall"  
**Reason:** "New drywall needs primer/sealer before paint."  
**Priority:** MINOR

#### 1.4 Drywall Replacement → Paint (CRITICAL)
**Trigger:** Drywall replacement detected  
**Required:** paint, finish coat  
**Missing Item:** "Paint repaired surfaces"  
**Reason:** "Drywall replacement usually requires painting finished surfaces."  
**Priority:** CRITICAL

#### 1.5 Drywall Replacement → Full Room Paint (MINOR)
**Trigger:** Drywall replacement detected  
**Required:** paint room, paint walls, paint ceiling, paint entire  
**Missing Item:** "Paint entire affected room (walls/ceiling)"  
**Reason:** "Patching drywall often requires full room paint for color/texture consistency."  
**Priority:** MINOR

#### 1.6 Drywall → Corner Bead/Trim (MINOR)
**Trigger:** Drywall installation  
**Required:** corner bead, trim, moldings  
**Missing Item:** "Corner bead and trim for drywall"  
**Reason:** "Drywall corners require corner bead and trim for proper finish."  
**Priority:** MINOR

---

### 2. ROOFING

#### 2.1 Shingles → Underlayment (CRITICAL)
**Trigger:** Contains shingles, roof, roofing + install/replace  
**Required:** underlayment, felt, tar paper, ice shield  
**Missing Item:** "Roofing underlayment/ice shield"  
**Reason:** "Shingles require underlayment for protection against water."  
**Priority:** CRITICAL

#### 2.2 Shingles → Flashing (CRITICAL)
**Trigger:** Shingle replacement detected  
**Required:** flashing, valley, ridge, step, counter flashing  
**Missing Item:** "Roof flashing (valleys, ridges, penetrations)"  
**Reason:** "Roofing requires flashing at valleys, ridges, and penetrations to prevent leaks."  
**Priority:** CRITICAL

#### 2.3 Roof Replacement → Gutters/Downspouts (MINOR)
**Trigger:** Roof replacement detected  
**Required:** gutters, downspouts, drainage  
**Missing Item:** "Gutters and downspouts"  
**Reason:** "Roof replacement often requires inspection/repair of gutter systems."  
**Priority:** MINOR

#### 2.4 Shingles → Ventilation (MINOR)
**Trigger:** Shingle replacement  
**Required:** roof vents, ridge vents, soffit vents, ventilation  
**Missing Item:** "Roof ventilation system"  
**Reason:** "Proper roof ventilation extends shingle life and prevents moisture issues."  
**Priority:** MINOR

#### 2.5 Roof → Drip Edge (MINOR)
**Trigger:** Roof replacement  
**Required:** drip edge, edge metal  
**Missing Item:** "Drip edge metal"  
**Reason:** "Drip edge protects roof edges and prevents water damage."  
**Priority:** MINOR

---

### 3. PLUMBING

#### 3.1 Pipe Replacement → Shutoff Valves (CRITICAL)
**Trigger:** Contains pipe, plumbing, water line + replace/repair  
**Required:** shutoff valve, ball valve, stop valve, isolation valve  
**Missing Item:** "Shutoff/isolation valves"  
**Reason:** "Pipe replacement requires shutoff valves for maintenance and emergency control."  
**Priority:** CRITICAL

#### 3.2 Pipe Replacement → Access Panel (MINOR)
**Trigger:** Pipe replacement in wall/ceiling  
**Required:** access panel, access door  
**Missing Item:** "Access panel for plumbing"  
**Reason:** "Pipes in walls/ceilings require access panels for future maintenance."  
**Priority:** MINOR

#### 3.3 Plumbing Fixture → Supply Lines (CRITICAL)
**Trigger:** Contains toilet, sink, faucet, shower, tub + install/replace  
**Required:** supply line, water line, connector, flex line  
**Missing Item:** "Supply lines/connectors for fixtures"  
**Reason:** "Plumbing fixtures require supply lines to connect to water supply."  
**Priority:** CRITICAL

#### 3.4 Plumbing Fixture → Drain/Waste (CRITICAL)
**Trigger:** Fixture installation detected  
**Required:** drain, waste, p-trap, trap  
**Missing Item:** "Drain/waste lines and P-traps"  
**Reason:** "Plumbing fixtures require drain/waste connections and P-traps."  
**Priority:** CRITICAL

#### 3.5 Water Heater → Expansion Tank (MINOR)
**Trigger:** Water heater installation  
**Required:** expansion tank, thermal expansion  
**Missing Item:** "Thermal expansion tank"  
**Reason:** "Water heaters often require expansion tanks for pressure relief (code requirement)."  
**Priority:** MINOR

#### 3.6 Pipe → Support/Straps (MINOR)
**Trigger:** Pipe installation  
**Required:** pipe support, strap, hanger, bracket  
**Missing Item:** "Pipe supports and hangers"  
**Reason:** "Pipes require proper support to prevent sagging and code compliance."  
**Priority:** MINOR

---

### 4. ELECTRICAL

#### 4.1 Wiring → Junction Box (CRITICAL)
**Trigger:** Contains wire, electrical, wiring + install/replace  
**Required:** junction box, electrical box, j-box  
**Missing Item:** "Junction boxes for electrical connections"  
**Reason:** "Electrical wiring requires junction boxes for connections (code requirement)."  
**Priority:** CRITICAL

#### 4.2 Circuit Addition → Breaker (CRITICAL)
**Trigger:** New circuit or additional wiring detected  
**Required:** circuit breaker, breaker, panel breaker  
**Missing Item:** "Circuit breaker in panel"  
**Reason:** "New circuits require corresponding breakers in electrical panel."  
**Priority:** CRITICAL

#### 4.3 Wiring → Grounding (CRITICAL)
**Trigger:** Electrical work detected  
**Required:** ground, grounding, ground wire, earth ground  
**Missing Item:** "Grounding system"  
**Reason:** "Electrical systems require proper grounding for safety (code requirement)."  
**Priority:** CRITICAL

#### 4.4 Outlet/Switch → Electrical Box (CRITICAL)
**Trigger:** Contains outlet, switch, receptacle + install  
**Required:** electrical box, outlet box, switch box  
**Missing Item:** "Electrical box for outlet/switch"  
**Reason:** "Outlets and switches require proper electrical boxes for installation."  
**Priority:** CRITICAL

#### 4.5 Wiring → Conduit (VARIES)
**Trigger:** Electrical wiring in exposed areas or commercial  
**Required:** conduit, electrical conduit  
**Missing Item:** "Electrical conduit"  
**Reason:** "Exposed or commercial electrical wiring requires conduit protection."  
**Priority:** MINOR (residential), CRITICAL (commercial/exposed)

---

### 5. HVAC

#### 5.1 HVAC Unit → Ductwork (CRITICAL)
**Trigger:** Contains HVAC, furnace, air conditioner + install/replace  
**Required:** duct, ductwork, supply duct, return duct  
**Missing Item:** "HVAC ductwork"  
**Reason:** "HVAC units require ductwork to distribute air."  
**Priority:** CRITICAL

#### 5.2 HVAC Unit → Vents/Registers (CRITICAL)
**Trigger:** HVAC installation detected  
**Required:** vent, register, grille, diffuser  
**Missing Item:** "HVAC vents and registers"  
**Reason:** "HVAC systems require supply and return vents/registers."  
**Priority:** CRITICAL

#### 5.3 HVAC Unit → Refrigerant Lines (CRITICAL)
**Trigger:** Air conditioner or heat pump installation  
**Required:** refrigerant line, line set, refrigerant  
**Missing Item:** "Refrigerant lines/line set"  
**Reason:** "Air conditioning systems require refrigerant lines between units."  
**Priority:** CRITICAL

#### 5.4 HVAC → Thermostat (MINOR)
**Trigger:** HVAC installation  
**Required:** thermostat, control, temperature control  
**Missing Item:** "Thermostat/control system"  
**Reason:** "HVAC systems require thermostats for operation."  
**Priority:** MINOR

#### 5.5 HVAC → Insulation on Lines (MINOR)
**Trigger:** HVAC refrigerant or water lines  
**Required:** insulation, line insulation, pipe wrap  
**Missing Item:** "Insulation on HVAC lines"  
**Reason:** "HVAC refrigerant and water lines require insulation for efficiency."  
**Priority:** MINOR

---

### 6. FLOORING

#### 6.1 Flooring → Subfloor Prep (CRITICAL)
**Trigger:** Contains flooring, tile, hardwood, carpet + install  
**Required:** subfloor, underlayment, floor prep, leveling  
**Missing Item:** "Subfloor preparation/underlayment"  
**Reason:** "Flooring installation requires proper subfloor preparation."  
**Priority:** CRITICAL

#### 6.2 Tile → Grout (CRITICAL)
**Trigger:** Tile installation detected  
**Required:** grout, tile grout  
**Missing Item:** "Tile grout"  
**Reason:** "Tile installation requires grout to fill joints."  
**Priority:** CRITICAL

#### 6.3 Tile → Sealer (MINOR)
**Trigger:** Tile installation  
**Required:** sealer, tile sealer, grout sealer  
**Missing Item:** "Tile/grout sealer"  
**Reason:** "Tile and grout benefit from sealers to prevent staining."  
**Priority:** MINOR

#### 6.4 Flooring → Transition Strips (MINOR)
**Trigger:** Flooring installation (multiple types)  
**Required:** transition, transition strip, reducer, threshold  
**Missing Item:** "Flooring transition strips"  
**Reason:** "Different flooring types require transition strips between them."  
**Priority:** MINOR

#### 6.5 Carpet → Padding (CRITICAL)
**Trigger:** Carpet installation  
**Required:** carpet pad, padding, underlayment  
**Missing Item:** "Carpet padding/underlayment"  
**Reason:** "Carpet requires padding for comfort and longevity."  
**Priority:** CRITICAL

---

### 7. WINDOWS & DOORS

#### 7.1 Window Replacement → Flashing (CRITICAL)
**Trigger:** Window installation/replacement  
**Required:** flashing, window flashing, head flashing  
**Missing Item:** "Window flashing"  
**Reason:** "Windows require flashing to prevent water intrusion."  
**Priority:** CRITICAL

#### 7.2 Window → Caulk/Sealant (CRITICAL)
**Trigger:** Window installation  
**Required:** caulk, sealant, window seal, weather seal  
**Missing Item:** "Window caulk/sealant"  
**Reason:** "Windows require caulking/sealant for weatherproofing."  
**Priority:** CRITICAL

#### 7.3 Window → Trim/Casing (MINOR)
**Trigger:** Window installation  
**Required:** trim, casing, window trim, jamb  
**Missing Item:** "Window trim/casing"  
**Reason:** "Windows typically require interior and exterior trim."  
**Priority:** MINOR

#### 7.4 Door → Hardware (CRITICAL)
**Trigger:** Door installation  
**Required:** hardware, door hardware, hinges, lockset, handle  
**Missing Item:** "Door hardware (hinges, lockset, handle)"  
**Reason:** "Doors require hardware for operation."  
**Priority:** CRITICAL

#### 7.5 Door → Weatherstripping (MINOR)
**Trigger:** Exterior door installation  
**Required:** weatherstrip, weatherstripping, door seal  
**Missing Item:** "Door weatherstripping"  
**Reason:** "Exterior doors require weatherstripping for energy efficiency."  
**Priority:** MINOR

---

### 8. SIDING & EXTERIOR

#### 8.1 Siding → Underlayment/WRVB (CRITICAL)
**Trigger:** Siding installation  
**Required:** underlayment, WRVB, house wrap, building paper  
**Missing Item:** "Siding underlayment/weather barrier"  
**Reason:** "Siding requires underlayment for moisture protection."  
**Priority:** CRITICAL

#### 8.2 Siding → Flashing (CRITICAL)
**Trigger:** Siding installation  
**Required:** flashing, corner flashing, J-channel  
**Missing Item:** "Siding flashing"  
**Reason:** "Siding requires flashing at corners and penetrations."  
**Priority:** CRITICAL

#### 8.3 Siding → Trim (MINOR)
**Trigger:** Siding installation  
**Required:** trim, corner trim, fascia, soffit  
**Missing Item:** "Exterior trim/corners"  
**Reason:** "Siding typically requires trim at corners and edges."  
**Priority:** MINOR

---

### 9. FOUNDATION & STRUCTURAL

#### 9.1 Foundation → Waterproofing (CRITICAL)
**Trigger:** Foundation work detected  
**Required:** waterproofing, foundation seal, dampproofing  
**Missing Item:** "Foundation waterproofing"  
**Reason:** "Foundations require waterproofing to prevent moisture intrusion."  
**Priority:** CRITICAL

#### 9.2 Foundation → Drainage (CRITICAL)
**Trigger:** Foundation work  
**Required:** drainage, drain tile, perimeter drain, weeping tile  
**Missing Item:** "Foundation drainage system"  
**Reason:** "Foundations require drainage systems to manage water."  
**Priority:** CRITICAL

#### 9.3 Concrete → Reinforcement (CRITICAL)
**Trigger:** Concrete slab/foundation work  
**Required:** rebar, reinforcement, wire mesh, steel  
**Missing Item:** "Concrete reinforcement (rebar/mesh)"  
**Reason:** "Concrete slabs typically require reinforcement."  
**Priority:** CRITICAL

#### 9.4 Concrete → Vapor Barrier (MINOR)
**Trigger:** Concrete slab  
**Required:** vapor barrier, plastic sheeting, poly  
**Missing Item:** "Vapor barrier under concrete"  
**Reason:** "Concrete slabs benefit from vapor barriers."  
**Priority:** MINOR

---

### 10. INSULATION

#### 10.1 Wall Insulation → Vapor Barrier (MINOR)
**Trigger:** Wall insulation installation  
**Required:** vapor barrier, vapor retarder, poly  
**Missing Item:** "Vapor barrier with insulation"  
**Reason:** "Wall insulation may require vapor barriers depending on climate."  
**Priority:** MINOR

#### 10.2 Insulation → Air Sealing (MINOR)
**Trigger:** Insulation work  
**Required:** air seal, caulk, foam sealant  
**Missing Item:** "Air sealing"  
**Reason:** "Insulation effectiveness requires proper air sealing."  
**Priority:** MINOR

---

### 11. WATER DAMAGE RESTORATION

#### 11.1 Water Damage → Demo (CRITICAL)
**Trigger:** Water damage restoration  
**Required:** demolition, demo, remove, tear out  
**Missing Item:** "Demolition of damaged materials"  
**Reason:** "Water damage requires removal of affected materials."  
**Priority:** CRITICAL

#### 11.2 Water Damage → Drying Equipment (CRITICAL)
**Trigger:** Water damage restoration  
**Required:** dehumidifier, air mover, drying equipment  
**Missing Item:** "Drying equipment and services"  
**Reason:** "Water damage requires professional drying to prevent mold."  
**Priority:** CRITICAL

#### 11.3 Water Damage → Mold Remediation (MINOR)
**Trigger:** Water damage with visible mold  
**Required:** mold remediation, mold removal, antimicrobial  
**Missing Item:** "Mold remediation"  
**Reason:** "Water damage may require mold remediation if present."  
**Priority:** MINOR (if visible)

#### 11.4 Water Damage → Moisture Barrier (CRITICAL)
**Trigger:** Water damage in basement/crawlspace  
**Required:** moisture barrier, vapor barrier  
**Missing Item:** "Moisture barrier"  
**Reason:** "Water-damaged areas require moisture barriers to prevent recurrence."  
**Priority:** CRITICAL

---

### 12. FIRE DAMAGE RESTORATION

#### 12.1 Fire Damage → Smoke Cleaning (CRITICAL)
**Trigger:** Fire damage restoration  
**Required:** smoke cleaning, smoke damage, deodorization  
**Missing Item:** "Smoke damage cleaning/deodorization"  
**Reason:** "Fire damage requires smoke cleaning throughout affected areas."  
**Priority:** CRITICAL

#### 12.2 Fire Damage → Structural Assessment (CRITICAL)
**Trigger:** Fire damage  
**Required:** structural inspection, engineer, assessment  
**Missing Item:** "Structural assessment"  
**Reason:** "Fire damage requires structural assessment for safety."  
**Priority:** CRITICAL

---

### 13. GENERAL CONSTRUCTION

#### 13.1 Construction → Permits (CRITICAL)
**Trigger:** Any major construction work  
**Required:** permit, building permit, inspection  
**Missing Item:** "Building permits and inspections"  
**Reason:** "Construction typically requires permits and inspections."  
**Priority:** CRITICAL

#### 13.2 Construction → Cleanup/Waste Removal (MINOR)
**Trigger:** Construction/demolition work  
**Required:** cleanup, waste removal, dumpster, debris removal  
**Missing Item:** "Construction cleanup and waste removal"  
**Reason:** "Construction generates waste requiring removal."  
**Priority:** MINOR

#### 13.3 Construction → Site Protection (MINOR)
**Trigger:** Construction work  
**Required:** protection, site protection, dust barrier, plastic  
**Missing Item:** "Site protection/dust barriers"  
**Reason:** "Construction requires site protection for adjacent areas."  
**Priority:** MINOR

---

## Priority Levels Explained

### CRITICAL
Items that **must** be included for the work to be complete, safe, code-compliant, and acceptable. Without these, the estimate is incomplete and may violate building codes.

**Examples:**
- Shutoff valves for plumbing
- Junction boxes for electrical
- Flashing for roofing/windows
- Underlayment for shingles

### MINOR
Items that are **recommended** but may be optional depending on scope, code requirements, or quality standards. These improve quality, efficiency, or longevity but may not be strictly required.

**Examples:**
- Primer/sealer before paint
- Transition strips for flooring
- Expansion tanks for water heaters

---

## Implementation Notes

1. **Keyword Matching:** Use case-insensitive matching and account for variations (e.g., "drywall" vs "sheetrock")
2. **Multiple Triggers:** An estimate can trigger multiple rules simultaneously
3. **False Positives:** The AI analysis layer helps filter false positives by understanding context
4. **Context-Aware:** Rules should consider room/area context (e.g., bathroom vs living room for flooring)
5. **Code Compliance:** Critical items are often code-required; missing them is a legal/compliance issue

---

## Future Enhancements

- Regional code variations
- Commercial vs residential differences
- Material quality levels (standard vs premium)
- Historical pattern learning
- Integration with Xactimate/Symbility line item databases
- Multi-room/multi-area dependency chains
